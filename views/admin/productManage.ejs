<meta charset="UTF-8">

<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
<!--    <link href="/stylesheets/fSelect.css" rel="stylesheet">-->
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css" />-->

<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
<!--    <script src="/javascripts/fSelect.js"></script>-->
    <style>

    </style>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-3">
            <%- include ('nav') -%>
        </div>
        <div class="col-9">
            <div id="content">
                <table id="select">
                    <tr>
                        <td class="manage">
                            <select id="gender" class="manage form-select">
                                <option value="전체">전체</option>
                                <option value="남성">남성</option>
                                <option value="여성">여성</option>
                            </select>
                        </td>
                        <td class="manage">
                            <select id="age" class="manage form-select">
                                <option value="전체">전체</option>
                                <option value="20~24세">20~24세</option>
                                <option value="25~29세">25~29세</option>
                                <option value="30~34세">30~34세</option>
                                <option value="35~39세">35~39세</option>
                                <option value="40~44세">40~44세</option>
                                <option value="45세 이상">45세 이상</option>
                            </select>
                        </td>
                        <td class="manage">
                            <select id="price" class="manage form-select">
                                <option value="전체">전체</option>
                                <option value="1만 5천원">1만 5천원</option>
                                <option value="2만원">2만원</option>
                                <option value="2만 5천원">2만 5천원</option>
                                <option value="3만원">3만원</option>
                                <option value="3만 5천원">3만 5천원</option>
                                <option value="4만원">4만원</option>
                                <option value="4만 5천원">4만 5천원</option>
                                <option value="5만원">5만원</option>
                            </select>
                        </td>
                        <td class="manage">
                            <select id="category" class="manage form-select">
                                <option value="전체">전체</option>
                                <option value="화장품">화장품</option>
                                <option value="식품">식품</option>
                                <option value="건강">건강</option>
                                <option value="리빙">리빙</option>
                                <option value="패션잡화">패션잡화</option>
                                <option value="디지털">디지털</option>
                            </select>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" style="margin-left: 5px; height: 40px;"
                                    onclick="filter()">filter</button>
                        </td>
                        <td>
                            <div style="margin-left: 30px;" id="pagination"></div>
                        </td>
                    </tr>
                </table>
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th scope="col">코드</th>
                        <th scope="col">상품명</th>
                        <th scope="col">상품유형</th>
                        <th scope="col">썸네일</th>
                        <th scope="col">상품소개</th>
                        <th scope="col">판매처</th>
                        <th scope="col">노출수</th>
                        <th scope="col">좋아요수</th>
                        <th scope="col">주문수</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody id="product_list">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    function filter() {
        let filterValue = {};
        filterValue.gender = document.getElementById('gender').value
        filterValue.age = document.getElementById('age').value
        filterValue.price = document.getElementById('price').value
        filterValue.category = document.getElementById('category').value
        console.log(filterValue);

        axios.post('http://localhost:4242/admin/product/', {
            gender: filterValue.gender,
            age: filterValue.age,
            price: filterValue.price,
            category: filterValue.category,
        })
            .then(function(response){
                console.log(response);
                // window.location.assign('/');
            })
            .catch(function(error){
                console.log(error);
            })
        console.log('제출 완료');
    }
    // (function ($) {
    //     $(function () {
    //         // if (sessionStorage.getItem('login') !== 'true') {
    //         //     alert("로그인이 필요한 서비스입니다.")
    //         //     location.href = "https://gifty4u.com/admin"
    //         // }
    //         window.fs_test = $('#gender').fSelect({
    //             placeholder: '성별',
    //             numDisplayed: 2,
    //             overflowText: '{n} selected',
    //             noResultsText: 'No results found',
    //             searchText: 'Search',
    //             showSearch: false
    //         });
    //         window.fs_test = $('#age').fSelect({
    //             placeholder: '연령',
    //             numDisplayed: 2,
    //             overflowText: '{n} selected',
    //             noResultsText: 'No results found',
    //             searchText: 'Search',
    //             showSearch: false
    //         });
    //         window.fs_test = $('#price').fSelect({
    //             placeholder: '가격대',
    //             numDisplayed: 2,
    //             overflowText: '{n} selected',
    //             noResultsText: 'No results found',
    //             searchText: 'Search',
    //             showSearch: false
    //         });
    //         window.fs_test = $('#category').fSelect({
    //             placeholder: '카테고리',
    //             numDisplayed: 2,
    //             overflowText: '{n} selected',
    //             noResultsText: 'No results found',
    //             searchText: 'Search',
    //             showSearch: false
    //         });
    //
    //
    //         let container = $('#pagination');
    //         container.pagination({
    //             pageSize: 5,
    //             dataSource: function (done) {
    //                 let genders = $('#gender option:selected').map(function () {
    //                     return this.value;
    //                 }).get();
    //
    //                 let ages = $('#age option:selected').map(function () {
    //                     return this.value;
    //                 }).get();
    //
    //                 let prices = $('#price option:selected').map(function () {
    //                     return this.value;
    //                 }).get();
    //
    //                 let categories = $('#category option:selected').map(function () {
    //                     return this.value;
    //                 }).get();
    //
    //                 fetch("https://gifty4u.com/admin/product/filter", {
    //                     method: "POST",
    //                     headers: {
    //                         "Content-Type": "application/json",
    //                     },
    //                     body: JSON.stringify({
    //                         genders: genders,
    //                         ages: ages,
    //                         prices: prices,
    //                         categories: categories
    //                     }),
    //                 }).then((response) => response.json())
    //                     .then((res) => {
    //                         console.log(res.data)
    //                         done(res.data)
    //                     }).catch((err) => {
    //                     console.log(err.error)
    //                 })
    //             }
    //             ,
    //             callback: function (data, pagination) {
    //                 $('#product_list').empty();
    //                 var dataHtml = '';
    //                 $.each(data, function (index, product) {
    //                     dataHtml += `<tr> <td scope="col"><p>${product.product_code}</p></td>
    //                   <td scope="col" style><p onclick="window.open('https://gifty4u.com/admin/product/detail?product_code=${product.product_code}','상품수정','width=900,height=1000,left=500,top=50')">${product.product_name}</p></td>
    //                   <td scope="col"><p>${product.category}</p></td>
    //                   <td scope="col"><p><img src="${product.thumbnail}" alt="" style="width:100px; height: 100px;"/></p></td>
    //                   <td scope="col"><p>${product.title}</p></td>
    //                   <td scope="col"><p>${product.brand}</p></td>
    //                   <td scope="col"><p>${product.exposure_count}</p></td>
    //                   <td scope="col"><p>${product.love_count}</p></td>
    //                   <td scope="col"><p>${product.order_count}</p></td>
    //                   <td scope="col"><button type="button" class="btn btn-light" onclick="deleteProduct('${product.product_code}')">삭제</button></td></tr>`
    //                 });
    //                 $("#product_list").append(dataHtml);
    //             }
    //         })
    //     });
    // })(jQuery);
    //
    // function filter() {
    //     let container = $('#pagination');
    //     container.pagination({
    //         pageSize: 5,
    //         dataSource: function (done) {
    //             let genders = $('#gender option:selected').map(function () {
    //                 return this.value;
    //             }).get();
    //
    //             let ages = $('#age option:selected').map(function () {
    //                 return this.value;
    //             }).get();
    //
    //             let prices = $('#price option:selected').map(function () {
    //                 return this.value;
    //             }).get();
    //
    //             let categories = $('#category option:selected').map(function () {
    //                 return this.value;
    //             }).get();
    //
    //             fetch("https://gifty4u.com/admin/product/filter", {
    //                 method: "POST",
    //                 headers: {
    //                     "Content-Type": "application/json",
    //                 },
    //                 body: JSON.stringify({
    //                     genders: genders,
    //                     ages: ages,
    //                     prices: prices,
    //                     categories: categories
    //                 }),
    //             }).then((response) => response.json())
    //                 .then((res) => {
    //                     console.log(res.data)
    //                     done(res.data)
    //                 }).catch((err) => {
    //                 console.log(err.error)
    //             })
    //         },
    //
    //         callback: function (data, pagination) {
    //             $('#product_list').empty();
    //             var dataHtml = '';
    //             $.each(data, function (index, product) {
    //                 dataHtml += `<tr> <td scope="col"><p>${product.product_code}</p></td>
    //                   <td scope="col" style="width:200px"><p onclick="window.open('https://gifty4u.com/admin/product/detail?product_code=${product.product_code}','상품수정','width=900,height=1000,left=500,top=50')">${product.product_name}</p></td>
    //                   <td scope="col"><p>${product.category}</p></td>
    //                   <td scope="col"><p><img src="${product.thumbnail}" alt="" style="width:100px; height: 100px;"/></p></td>
    //                   <td scope="col"><p>${product.title}</p></td>
    //                   <td scope="col"><p>${product.brand}</p></td>
    //                   <td scope="col"><p>${product.exposure_count}</p></td>
    //                   <td scope="col"><p>${product.love_count}</p></td>
    //                   <td scope="col"><p>${product.order_count}</p></td>
    //                   <td scope="col"><button type="button" class="btn btn-light" onclick="deleteProduct('${product.product_code}')">삭제</button></td></tr>`
    //             });
    //             $("#product_list").append(dataHtml);
    //         }
    //     })
    // }
    //
    //
    //
    // function deleteProduct(product_code) {
    //     fetch("https://gifty4u.com/admin/product", {
    //         method: "DELETE",
    //         headers: {
    //             "Content-Type": "application/json",
    //         },
    //         body: JSON.stringify({
    //             product_code: product_code,
    //         }),
    //     }).then((response) => response.json())
    //         .then((res) => {
    //             console.log(res.data)
    //             if (res.data === 'delete') {
    //                 alert("제품이 삭제됐습니다")
    //                 window.location.reload();
    //             }
    //         }).catch((err) => {
    //         alert(err.error)
    //         console.log(err.error)
    //     })
    //
    // }


</script>
</body>

</html>