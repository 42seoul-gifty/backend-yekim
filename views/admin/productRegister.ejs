<!DOCTYPE html>
<meta charset="UTF-8">
<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <style>
    </style>
</head>
<body class="container">

<div class="row">
    <div class="col-3">
    </div>
    <div class="col-9" style="padding-top: 30px;">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">상품코드</span>
            <input id="product_code" type="text" class="form-control" aria-describedby="basic-addon1">
        </div>
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">상품명</span>
            <input id="product_name" type="text" class="form-control" aria-describedby="basic-addon1">
        </div>
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">썸네일</span>
            <input id="product_thumbnail" name="thumbnail" type="file" class="form-control" aria-describedby="basic-addon1" accept="image/*">
        </div>
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">소비자가</span>
            <input id="product_price" type='number' class="form-control" aria-describedby="basic-addon1"
                   placeholder=",를 떼고 숫자만 입력해주세요">
        </div>
        <br>
        <br>
        <button id="register" type="button" class="btn btn-primary" onclick="save()" style="width: 200px; height:50px; margin: 0 40%;">
            저장
        </button>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
    </div>
</div>

</body>
<script>
    function save() {
        const formData = new FormData();
        formData.append('code', document.getElementById('product_code').value);
        formData.append('name', document.getElementById('product_name').value);
        formData.append('thumbnail', document.getElementById('product_thumbnail').files[0]);
        formData.append('price', document.getElementById('product_price').value);
        axios.post('http://localhost:4242/admin/product/register', formData, {
            headers: {
                'Content-Type': 'multipart/form-data;'
            }
        })
            .then(function(response){
                console.log(response);
                window.location.assign('/admin/product');
            })
            .catch(function(error){
                console.log(error);
            })
    }
</script>
</html>

